<!DOCTYPE html>
<html lang="en-US" color-mode="user">
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="../shared/shared-styles.css" />
		<link rel="stylesheet" href="settings.css" />
		<title>Settings - PhanTabular</title>
		<link rel="icon" type="image/x-icon" href="../icons/phantabular-32.png">
	</head>

	<body>
		<dialog id="confirmArchiveDeletionDialog" class="confirmation-dialog">
			<form method="dialog">
				<p>
					<label>WARNING!<br/>This will delete this profile's entire tab archive (including tabs, sessions and categories). This action is irreversible. Are you sure you want to proceed?</label>
				</p>
				<div>
					<button type="submit" data-action="confirm-archive-deletion" class="colorize-button colorize-red">Confirm Deletion</button>
					<button type="reset" data-action="cancel-archive-deletion"  class="colorize-button" style="float: right;">Cancel</button>
				</div>
			</form>
		</dialog>
		
		<dialog id="deletingArchiveDialog" class="confirmation-dialog">
			<form method="dialog">
				<p>
					<label>Deletion in progress...</label>
					
				</p>
				<div class="spinner-container">
					<div class="spinner-animation">
						<div class="spinner"></div>
					</div>
				</div>
			</form>
		</dialog>
		
		<dialog id="needsCapturePermissionDialog">
			<form method="dialog">
				<div>
					<label>The extension requires permission to access your data for all websites in order to capture tab preview images.</label>
				</div>
				<div>
					<center><button type="submit" class="colorize-button">Close</button></center>
				</div>
			</form>
		</dialog>
	
		<div>
			<div id="settings-root">
				<h1>Settings</h1>
				
				<div id="archive-settings" class="settings-section colorize-section">
					<h2>Archival settings:</h2>					
					<div><input type="checkbox" id="noDuplicateUrlsCheckbox" /><label for="noDuplicateUrlsCheckbox">Merge tabs with identical URLs (avoids multiple copies of the same tab within a single group)</label></div>
					<div><input type="checkbox" id="onlyStoreLatestSessionCheckbox" /><label for="onlyStoreLatestSessionCheckbox">Only store the latest session of a tab (empty sessions will automatically be deleted once the last tab moves out of them)</label></div>
					
					<div class="inner-section">
						<h3>Popup:</h3>
						<div><input type="checkbox" id="autoCloseArchivedTabsFromPopupCheckbox" /><label for="autoCloseArchivedTabsFromPopupCheckbox">Archiving tabs via the popup automatically closes them</label></div>
						<div><input type="checkbox" id="archiveHiddenTabsFromPopupCheckbox" /><label for="archiveHiddenTabsFromPopupCheckbox">The popup archives hidden tabs</label></div>
						<div><input type="checkbox" id="closeHiddenTabsFromPopupCheckbox" /><label id="closeHiddenTabsFromPopupLabel" for="closeHiddenTabsFromPopupCheckbox">Hidden tabs archived this way are also closed</label></div>
						<div><input type="checkbox" id="archivePinnedTabsFromPopupCheckbox" /><label for="archivePinnedTabsFromPopupCheckbox">The popup archives pinned tabs</label></div>
						<div><label class="note" for="archivePinnedTabsFromPopupCheckbox">NOTE: The "Selected Tab(s)" button can always archive pinned tabs.</label></div>
						<div><input type="checkbox" id="closePinnedTabsFromPopupCheckbox" /><label id="closePinnedTabsFromPopupLabel" for="closePinnedTabsFromPopupCheckbox">Pinned tabs archived this way are also closed</label></div>
					</div>
					
					<div class="inner-section">
						<h3>Session restore:</h3>
						<div><input type="checkbox" id="archiveAllTabsOnSessionRestoreCheckbox" /><label for="archiveAllTabsOnSessionRestoreCheckbox">Restoring a session automatically archives all open tabs within it</label></div>
						<div><label class="note" for="archiveAllTabsOnSessionRestoreCheckbox">NOTE: Set the browser to automatically restore tabs from the previous session in order to achieve automatic archival.</label></div>
						<div><label class="note" for="archiveAllTabsOnSessionRestoreCheckbox">NOTE: Installing a new version of the extension will also trigger this effect and archive all tabs. Since the browser can update extensions automatically in the background, this might lead to your tabs being archived seemingly at random sometimes. (Namely whenever an update of the extension releases).</label></div>
						<div><input type="checkbox" id="autoCloseArchivedTabsFromSessionRestoreCheckbox" /><label id="autoCloseArchivedTabsFromSessionRestoreLabel" for="autoCloseArchivedTabsFromSessionRestoreCheckbox">Archiving tabs via session restore automatically closes them</label></div>
						<div><label id="autoCloseArchivedTabsFromSessionRestoreNoteLabel" class="note" for="autoCloseArchivedTabsFromSessionRestoreCheckbox">NOTE: Enable this to automatically start with a clean browser session every time the browser is started.</label></div>
						<div><input type="checkbox" id="archiveHiddenTabsFromSessionRestoreCheckbox" /><label id="archiveHiddenTabsFromSessionRestoreLabel" for="archiveHiddenTabsFromSessionRestoreCheckbox">Session restore archives hidden tabs</label></div>
						<div><input type="checkbox" id="closeHiddenTabsFromSessionRestoreCheckbox" /><label id="closeHiddenTabsFromSessionRestoreLabel" for="closeHiddenTabsFromSessionRestoreCheckbox">Hidden tabs archived this way are also closed</label></div>
						<div><input type="checkbox" id="archivePinnedTabsFromSessionRestoreCheckbox" /><label id="archivePinnedTabsFromSessionRestoreLabel" for="archivePinnedTabsFromSessionRestoreCheckbox">Session restore archives pinned tabs</label></div>
						<div><input type="checkbox" id="closePinnedTabsFromSessionRestoreCheckbox" /><label id="closePinnedTabsFromSessionRestoreLabel" for="closePinnedTabsFromSessionRestoreCheckbox">Hidden tabs archived this way are also closed</label></div>
					</div>
					
					<div class="inner-section">
						<h3>Preview images:</h3>
						<div><input type="checkbox" id="savePreviewImagesCheckbox" /><label for="savePreviewImagesCheckbox">Save preview images of tabs contents (requires additional storage space and RAM, archiving tabs takes longer)</label></div>
						<div>
							<label id="previewImageFormatLabel" for="previewImageFormatSelect" disabled>Image format:</label>
							<select id="previewImageFormatSelect" class="inline-option" disabled>
								<option value="jpeg" selected>JPEG (lower quality, takes up less space)</option>
								<option value="png">PNG (higher quality, takes up more space)</option>
							</select>
						</div>
						<div>
							<div class="inputs-with-labels">
								<label id="previewImageQualityLabel" for="previewImageQualityNumber" disabled>Image quality (0 = lowest, 100 = highest):</label>
								<input type="range" id="previewImageQualityRange" min="0" max="100" disabled></input>
								<input type="number" id="previewImageQualityNumber" min="0" max="100" disabled></input>
							</div>
						</div>
						<div>
							<div class="inputs-with-labels">
								<label id="previewImageScaleLabel" for="previewImageScaleNumber" disabled>Image scale:</label>
								<input type="range" id="previewImageScaleRange" min="5" max="500" disabled></input>
								<input type="number" id="previewImageScaleNumber" min="5" max="500" disabled></input>
								<label id="previewImageScalePercentLabel" for="previewImageScaleNumber" disabled>%</label>
							</div>
						</div>
						<div>
							<label>Estimated preview image size:</label> <label id="previewImageSizeEstimateLabel">0 bytes</label>
							<label class="note">NOTE: The actual image size for any given tab may vary, depending on several factors such as visible viewport area, zoom level and the content being captured.</label>
						</div>
						<details id="previewImageRoot" class="capture-preview-container">
							<summary>Preview:</summary>
							<div id="previewImageSource" class="capture-preview-source">
								<h2>Input:</h2>
								<div id="previewImageSourceContent" class="capture-preview-source-content colorize-section colorize-red">
									<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam vel luctus ipsum. Sed ac placerat ipsum. In pretium, velit sed pretium tincidunt, lectus velit aliquet lorem, ac posuere nulla lectus sit amet neque. Nunc vel nisl vel velit consequat porttitor. Duis sed varius metus, quis elementum mauris. Fusce pharetra neque nec risus mollis aliquet. Nam mollis nisi ligula. Maecenas eu leo sit amet arcu porta maximus. Phasellus pretium nec magna sed interdum. Vestibulum sagittis molestie purus vel scelerisque. Morbi posuere sed ex quis viverra. Cras lacinia nunc ac rutrum dapibus. Nam consectetur dignissim purus, non sagittis nunc convallis eget. Proin tempus neque id magna pulvinar porttitor.</p>
									<p><center><img src="../images/preview_geese.jpg"/></center></p>
									<p>Pellentesque ac ligula nisi. Curabitur eu justo non quam volutpat rutrum vitae ac risus. Suspendisse at aliquet nibh, eu pulvinar tellus. Donec ullamcorper sollicitudin dolor sed dignissim. Donec nisi dui, finibus sit amet dui sed, tincidunt efficitur lectus. Nullam viverra nibh ut cursus convallis. Fusce efficitur tellus tortor, vel aliquet massa maximus vel. Fusce id augue quis sapien consequat laoreet. Nullam sed felis non libero maximus condimentum. Sed tempor efficitur purus vitae tempor. Curabitur eu ante sollicitudin, accumsan ante sit amet, placerat nisi. Suspendisse suscipit, lacus ut sodales maximus, lacus nunc blandit tellus, sit amet luctus ante nibh feugiat quam. Mauris dui leo, ullamcorper a luctus pharetra, semper ac elit. Praesent blandit velit vel maximus aliquam. In ut iaculis justo, vitae gravida nulla.</p>
								</div>
							</div>
							<div id="previewImageTarget" class="capture-preview-target">
								<h2>Output:</h2>
								<div id="previewImageContainer">
								</div>
							</div>
						</details>
					</div>
				</div>
				
				<div id="open-settings" class="settings-section colorize-section">
					<h2>Open settings:</h2>
					<div><input type="checkbox" id="deleteTabsUponOpenCheckbox" /><label for="deleteTabsUponOpenCheckbox">Opening tabs from the archive automatically deletes them from it</label></div>
					<div>
						<label for="tabOpenPositionSelect">Position of tabs after opening from the archive:</label>
						<select id="tabOpenPositionSelect" class="inline-option">
							<option value="originalPosition" selected>Original position before archival (if possible)</option>
							<option value="nextToActiveTab">Next to active tab</option>
							<option value="endOfActiveWindow">At the end of the active window</option>
						</select>
					</div>
					<div><input type="checkbox" id="confirmTabDeletionCheckbox" /><label for="confirmTabDeletionCheckbox">Show confirmation dialog when deleting individual tabs</label></div>
				</div>
				
				<div class="buttons-section">
					<button data-action="reset-settings" class="colorize-button">Reset Settings to Default</button>
					<button data-action="delete-archive" class="colorize-button colorize-red">Delete Archive</button>
				</div>
			</div>
			<script type="module" src="settings.js"></script>
		</div>
	</body>
</html>
